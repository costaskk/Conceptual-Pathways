<html>
    <head>
        <script src="sigma.js-1.2.1/src/sigma.core.js"></script>
        <script src="sigma.js-1.2.1/src/conrad.js"></script>
        <script src="sigma.js-1.2.1/src/utils/sigma.utils.js"></script>
        <script src="sigma.js-1.2.1/src/utils/sigma.polyfills.js"></script>
        <script src="sigma.js-1.2.1/src/sigma.settings.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.dispatcher.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.configurable.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.graph.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.camera.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.quad.js"></script>
        <script src="sigma.js-1.2.1/src/classes/sigma.classes.edgequad.js"></script>
        <script src="sigma.js-1.2.1/src/captors/sigma.captors.mouse.js"></script>
        <script src="sigma.js-1.2.1/src/captors/sigma.captors.touch.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/sigma.renderers.canvas.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/sigma.renderers.webgl.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/sigma.renderers.svg.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/sigma.renderers.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/webgl/sigma.webgl.nodes.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/webgl/sigma.webgl.edges.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/webgl/sigma.webgl.edges.fast.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.labels.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.hovers.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.nodes.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edges.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edges.curve.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/canvas/sigma.canvas.extremities.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.utils.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.nodes.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.edges.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.edges.curve.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.labels.def.js"></script>
        <script src="sigma.js-1.2.1/src/renderers/svg/sigma.svg.hovers.def.js"></script>
        <script src="sigma.js-1.2.1/src/middlewares/sigma.middlewares.rescale.js"></script>
        <script src="sigma.js-1.2.1/src/middlewares/sigma.middlewares.copy.js"></script>
        <script src="sigma.js-1.2.1/src/misc/sigma.misc.animation.js"></script>
        <script src="sigma.js-1.2.1/src/misc/sigma.misc.bindEvents.js"></script>
        <script src="sigma.js-1.2.1/src/misc/sigma.misc.bindDOMEvents.js"></script>
        <script src="sigma.js-1.2.1/src/misc/sigma.misc.drawHovers.js"></script>
    </head>
    <body>
        <div id="container">
                <style>
                    #graph-container {
                        top: 0;
                        bottom: 0;
                        left: 0;
                        right: 0;
                        position: absolute;
                    }
                </style>
                <div id="graph-container"></div>
        </div>
        <script>
            var i, s, g = {nodes: [], edges: []};
                    
            /*This is a javascript function, for fetching files, you can refer here: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch */
            fetch("./nodes.json")
                .then(fetchNodes)
                .then(setNodes)
                .then(setEdges)
                .then(instantiateSigma);

            function fetchNodes(response) {
                return response.json();
            }

            function setNodes(nodes) {
                for (i = 0; i < nodes.length; i++) {
                    var node = nodes[i];
                    g.nodes.push({
                        id: node["id"],
                        label: node["title"],
                        x: node["x"],
                        y: node["y"],
                        size: 10,
                        color: '#666'
                    });
                }
                return nodes;
            }

            function setEdges(nodes) {
                for (i = 0; i < nodes.length; i++) {
                    var node = nodes[i];
                    node["connecting_nodes"].forEach(connecting_node => connectNodes(node["id"], connecting_node));
                };
            }

            function connectNodes(firstNodeId, secondNodeId) {
                g.edges.push({
                    id: 'e' + firstNodeId + secondNodeId,
                    source: firstNodeId,
                    target: secondNodeId,
                    size: 1,
                    color: '#ccc'
                });
            }

            function instantiateSigma() {
                s = new sigma({
                    graph: g,
                    container: 'graph-container'
                });
            }
        </script>
    </body>
</html>